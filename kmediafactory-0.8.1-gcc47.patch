diff -up kmediafactory-0.8.1/lib/kmftools.cpp.gcc47 kmediafactory-0.8.1/lib/kmftools.cpp
--- kmediafactory-0.8.1/lib/kmftools.cpp.gcc47	2011-08-01 02:47:08.000000000 -0500
+++ kmediafactory-0.8.1/lib/kmftools.cpp	2012-05-08 13:30:52.553939612 -0500
@@ -51,6 +51,7 @@
 #include <fontconfig/fontconfig.h>
 #include <sys/stat.h>
 #include <stdlib.h>
+#include <unistd.h>
 
 #include "Q4puGenericSignalSpy.h"
 
diff -up kmediafactory-0.8.1/plugins/video/videoobject.cpp.gcc47 kmediafactory-0.8.1/plugins/video/videoobject.cpp
--- kmediafactory-0.8.1/plugins/video/videoobject.cpp.gcc47	2011-08-01 02:47:08.000000000 -0500
+++ kmediafactory-0.8.1/plugins/video/videoobject.cpp	2012-05-08 13:29:29.513977758 -0500
@@ -597,15 +597,15 @@ QVariant VideoObject::writeDvdAuthorXml(
             lang = "xx";
         }
 
-        QDomElement sub = doc.createElement("subpicture");
+        QDomElement sub2 = doc.createElement("subpicture");
 
         if ((lang == preferredLanguage) && (subFound == false)) {
             subFound = true;
             subTrack = i;
         }
 
-        sub.setAttribute("lang", lang);
-        titles.appendChild(sub);
+        sub2.setAttribute("lang", lang);
+        titles.appendChild(sub2);
         ++i;
     }
 
